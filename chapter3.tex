\chapter[バーの位置に基づく空中過程を含まないブラキエーション動作]%
{バーの位置に基づく\\空中過程を含まないブラキエーション動作}
        \chaplabel{chapter3}
        \section{はじめに}
        
        伸縮する単リンクブラキエーションロボットは，その「伸縮する」という特徴を活用することで，
        目標のバーまでの距離に合わせてリンクの長さを調整して移動することが可能となる．
        これにより，おもりを動かすことで励振するブラキエーションロボット\cite{akahane2022single}よりも
        自在な移動が実現できる．
        先行研究\cite{Hijiri:Robomech2024}では実験的にリンクを伸ばすタイミングを決定していた．
        しかし，伸ばすタイミングや長さが適切ではない場合，バーを把持できないだけでなく，
        バーとロボットが衝突することで不具合が生じたり，破損してしまう．
        また，目標バーを異なる位置にした場合，再び実験的にリンクを伸ばすタイミングを模索しなければならない．
        そこで，本章ではバーの位置に基づいた空中過程を含まないブラキエーション動作について述べる．
          
        \section{伸縮タイミングの検討}

        リンクを伸ばして次のバーを把持する場合，伸ばすタイミングは\figref{noAerialBrachiationFig.eps}に示すように以下の4通りの方法が考えられる．

        \begin{itemize}
        \item 方法1 (\figref{noAerialBrachiationFig.eps}(1))：
        
        バーに対して下側から近づき，バーに近づいたらリンクを伸ばし始める．

        バー把持時のグリッパーに対する回転方向の負荷が小さいが，
        伸縮による角速度の変化や，伸縮時間を考慮する必要があり伸縮制御が複雑になる．
        
        \item 方法2 (\figref{noAerialBrachiationFig.eps}(2))：
        
        バーに対して上側から近づき，バーに近づいたらリンクを伸ばし始める．
        
        バー把持時のグリッパーに対する回転方向の負荷が小さいが，
        伸縮による角速度の変化や，伸縮時間を考慮する必要があり伸縮制御が複雑になる．

        \item 方法3 (\figref{noAerialBrachiationFig.eps}(3))：
        
        最高点においてリンクを目標の長さまで伸ばし終えた状態で上側からバーに近づく．
        
        振子の最高点に達したときに伸縮するため，伸縮制御が容易であるが，
        最高点が目標のバーから離れている場合，バー把持時のグリッパーに対する回転方向の負荷が大きくなる．
        
        \item 方法4 (\figref{noAerialBrachiationFig.eps}(4))：
        
        最高点においてリンクを目標の長さまで伸ばし終えた状態で下側からバーに近づく．

        方法3と同様に伸縮制御が容易であるが，
        把持していたバー(\figref{noAerialBrachiationFig.eps}におけるbar 1)と衝突する可能性がある．

        \end{itemize}

        ここで，振動の最高点においてリンクを伸ばし始めた場合を考えた．
        ロボットが最小長0.56 mから最大長0.74 mまで伸びるためにかかる時間を計測したところ
        0.37 sであり，\equref{Approximation Model}を用いて伸び終えるまでの減衰量を求めたところ，
        振幅によって少なくとも約40 deg，多い場合だと約70 degであることが分かった．
        すなわち，方法2・方法3では伸び終える前に目標バーを通り過ぎてしまう可能性がある．
        そこで，本研究では伸縮のための時間が十分あり，伸縮制御が容易である方法4を採用し，bar1を通り過ぎた後に目標長さに変えることでバーとの衝突を回避することを想定した．
        \fig{noAerialBrachiationFig.eps}{width=1.0\hsize}{Approach methods in brachiation movements without an aerial phase}

        \section{空中過程を含まないブラキエーション実験}

        \subsection{目標振幅の決定}
        \figref{BarPositionFig.eps}に目標とするバーの位置の概略図を示す．
        座標軸は左向きを$x$軸の正方向，上向きを$z$軸の正方向に設定し，
        ロボットが把持しているバーの座標を原点$(0,0)$，
        目標バーの座標を$(l_{\mathrm{bx}},l_{\mathrm{bz}})$とし，原点と結んだ線分が$z$軸となす角度を$\theta$とする．
        また，ロボットは角度$\varphi$，角速度$\dot{\varphi}$とボディの全長$l_{\mathrm{r}}$で表す．
        グリッパーが届く範囲にあるバーであれば，空中過程を含まないブラキエーションが可能である．
        ゆえに，ロボットの最大の長さを$l_{\mathrm{rMax}}$，最小の長さを$l_{\mathrm{rMin}}$とすると
        目標とするバーの条件は\equref{barRange}となる．
        また，目標とするバーの座標を用いて角度$\theta$は\equref{theta}で表される．
        \begin{eqnarray}
                \equlabel{barRange}
                l_{\mathrm{rMin}} &\le& \sqrt{l_{\mathrm{bx}}^2+l_{\mathrm{bz}}^2} \le l_{\mathrm{rMax}}\\
                \equlabel{theta}
                \theta&=&90+\arctan{\left(\frac{l_{\mathrm{bz}}}{l_{\mathrm{bx}}}\right)}
                \end{eqnarray}  
        ここで，グリッパーを閉じる時間を考慮して目標バーの高さに到達する前にグリッパーを閉じ始めると，
        グリッパーの上側の爪(\figref{}におけるclaw1)がバーに衝突してしまう．そこで，目標バーの高さを超えてから閉じ始め，
        下側の爪(\figref{}におけるclaw2)が引っかからない状態で目標バーを通り過ぎ，
        目標バーの高さになったタイミングでグリッパーを閉じ終えるように試みた．
        \figref{noAerialAmp.eps}に示す振幅を用いてバー把持の流れを以下にようにした．
        \begin{enumerate}
                \item 振幅$A_0$になるように振幅調整
                \item 目標リンク長(目標バーまでの距離)に伸縮調整
                \item 振幅$A_1$に到達したらグリッパーを閉じ始める
                \item 目標バーの位置$\theta$でグリッパーを閉じ終える
        \end{enumerate}      
        グリッパーを閉じる時間と\equref{Approximation Model}を基に目標振幅となる$A_0$を求めた．
        振幅$A_0$に到達した後は単純な減衰振動となると仮定すると，
        \equref{Approximation Model}における振幅増加率$\lambda$はリンク最大長$l_{\mathrm{max}}=0.56$として$\lambda=-0.04$とみなせる．
        グリッパーを閉じるために要する時間は0.183 sであるため，閉じ終わりが目標バー位置$\theta$であるために必要な振幅$A_1$は\equref{A1}となる．
        また，半周期後に振幅$A_1$であるために必要な振幅$A_0$は\equref{A0}となる．
        なお，$\omega_{(A)}$は振幅$A$を基に求めた角振動数を表す．
        これにより，振幅$A_0$を空中過程を含まないブラキエーションのための目標振幅とした．
        \begin{eqnarray}
                \equlabel{A1}
                A_1&=&\theta e^{-(-0.04)\times0.183}\cos{(\omega_{(A_1)}\times0.183)}\\
                \equlabel{A0}
                A_0&=&A_1 e^{-(-0.04)\times\pi/\omega_{(A_0)}}\cos{(\omega_{(A_0)}\times\pi/\omega_{(A_0)})}
                \end{eqnarray}
        \fig{BarPositionFig.eps}{width=0.8\hsize}{Schematic diagram of bar position}
        \fig{noAerialAmp.eps}{width=0.8\hsize}{Schematic diagram of amplitude}

        \newpage
        \subsection{ブラキエーション実験}

        空中過程を含まないブラキエーション動作の実験として，もともと把持しているバーと
        同じ高さ(実験1)・異なる高さ(実験2)の2種類の位置に目標バーを設置して実験を行った．
        目標バーの位置$(l_{\mathrm{bx}},l_{\mathrm{bz}})$，$\theta$，振幅$A_1$，目標振幅$A_0$を
        それぞれ\tabref{ex1}\tabref{ex2}に示す．
        \begin{table}[t]
                \begin{minipage}[c]{0.5\hsize}
                  \centering
                  \caption{No aerial phase experiment 1}
                  \tablabel{ex1}
                  \vspace{2mm}
                  \begin{tabular}{c|c}
                    \hline
                    $l_{\mathrm{bx}}$ & 0.74 m \\
                    $l_{\mathrm{bx}}$ & 0.00 m \\
                    $\theta$ & 90 deg \\ 
                    $A_1$ & 108 deg \\
                    $A_0$ & 113 deg \\
                    \hline
                  \end{tabular}
                \end{minipage}
                \begin{minipage}[c]{0.5\hsize}
                  \centering
                  \caption{No aerial phase experiment 2}
                  \tablabel{ex2}
                  \vspace{2mm}
                  \begin{tabular}{c|c}
                    \hline
                    $l_{\mathrm{bx}}$ & 0.72 m \\
                    $l_{\mathrm{bx}}$ & 0.14 m \\
                    $\theta$ & 101 deg \\ 
                    $A_1$ & 120 deg \\
                    $A_0$ & 126 deg \\
                    \hline
                  \end{tabular}
                \end{minipage}
              \end{table}
        また，
