\chapter[最適なバーリリース条件の導出]%
{最適なバーリリース条件の導出}
\chaplabel{chapter3}
      \section{はじめに}
      \seclabel{3-1}

      空中過程を含むブラキエーション動作は，目標とするバーを把持することができなかった場合に落下してしまうという危険性がある．
      確実なバー把持のための条件には，バーとグリッパーの距離に加え，バーとの衝突を考慮することも望まれる．
      そこで，本研究では目標バーとロボットのグリッパー間の距離と，バー把持時のバーに対するグリッパーの相対速度に基づく評価関数を用いて
      バーリリース条件を最適化することを提案する．
      本章では，任意のバーの位置に基づくリリース条件最適化と，最適条件を基に行ったリリース実験について述べる．

      \section{最適なバーリリース条件の導出}
        \subsection{空中過程における目標バーとグリッパーの距離と相対速度}

          \figref{barReleasefig.png}に示したロボットのバーリリース時の状態から，
          空中過程における目標バーとグリッパーの距離，相対速度を導出する．
          座標軸は左向きを$x$軸の正方向，上向きを$z$軸の正方向に設定し，
          ロボットが把持しているバーの座標を原点$(0,0)$，
          目標バーの座標を$(l_{\mathrm{bx}},l_{\mathrm{bz}})$とする．
          また，ロボットは姿勢$\varphi$とボディの全長$l_{\mathrm{r}}$の2変数を持つ．         
          ここで，バーリリース後の空中過程におけるロボットの長さ$l_{\mathrm{r}}$は
          バーリリース時から変えずに一定であるとすると， 
          ロボットの重心の軌道はバーリリース時の角度$\varphi$，角速度$\dot{\varphi}$による放物線軌道，
          手先の軌道はバーリリース時の角速度$\dot{\varphi}$による重心周りの一定速回転軌道となる．
          ゆえに，バーリリースから$t$秒後の目標バーとグリッパーとの距離$J_{\mathrm{d}}$，目標バーに対するグリッパーの相対速度$J_{\mathrm{r}}$は
          それぞれ\equref{Jd}，\equref{Jr}で表される．
          ここで，$g$は重力加速度，$(x_{\mathrm{c}},z_{\mathrm{c}})$，$(\dot{x_{\mathrm{c}}},\dot{z_{\mathrm{c}}})$はロボットの重心の位置と速度，
          $(x_{\mathrm{e}},z_{\mathrm{e}})$，$(\dot{x_{\mathrm{e}}},\dot{z_{\mathrm{e}}})$はグリッパーの手先の位置と速度を表す．
          \begin{eqnarray}
            \equlabel{x-c}
            x_{\mathrm{c}}&=&\frac{1}{2}l_{\mathrm{r}}\dot{\varphi}\cos{(\varphi)}t+\frac{1}{2}l_{\mathrm{r}}\sin{(\varphi)}\\
            \equlabel{z-c}
            z_{\mathrm{c}}&=&\frac{1}{2}l_{\mathrm{r}}\dot{\varphi}\sin{(\varphi)}t-\frac{1}{2}gt^2-\frac{1}{2}l_{\mathrm{r}}\cos{(\varphi)}\\
            \equlabel{x-e}
            x_{\mathrm{e}}&=&x_{\mathrm{c}}+\frac{1}{2}l_{\mathrm{r}}\sin{(\varphi+\dot{\varphi}t)}\\
            \equlabel{z-e}
            z_{\mathrm{e}}&=&z_{\mathrm{c}}-\frac{1}{2}l_{\mathrm{r}}\cos{(\varphi+\dot{\varphi}t)}\\
            \equlabel{Jd}
              J_{\mathrm{d}}(\varphi,\dot{\varphi},t,l_{\mathrm{r}})
              &=&\sqrt{(l_{\mathrm{bx}}-x_{\mathrm{e}})^2+(l_{\mathrm{bz}}-z_{\mathrm{e}})^2}\\
            \equlabel{Jr}
            J_{\mathrm{r}}(\varphi,\dot{\varphi},t,l_{\mathrm{r}})
            &=&\sqrt{\dot{x_{\mathrm{e}}}^2+\dot{z_{\mathrm{e}}}^2}
          \end{eqnarray}  
        
          
        \fig{barReleasefig.png}{width=0.6\hsize}{Schematic Diagram}
        
        \subsection{最適化のための評価関数}
        \seclabel{J}
        
        バーリリース条件の最適化のために，目標バーとグリッパーの距離と相対速度に基づく評価関数が最小となる条件を求める．
        評価関数$J$を\equref{Jd}，\equref{Jr}で示した距離$J_{\mathrm{d}}$と相対速度$J_{\mathrm{r}}$
        を用いて\equref{J}とした．
        ここで，$K$は重み係数を表し，確実な把持のためにバーとグリッパーの距離に重みづけを行う．
        \begin{eqnarray}
          \equlabel{J}
          J(\varphi,\dot{\varphi},t,l_{\mathrm{r}})=K{\times}J_{\mathrm{d}}+J_{\mathrm{r}}
        \end{eqnarray}
        
        評価関数$J$が最小になるとき，目標とするバーとグリッパーの距離と相対速度がともに小さくなる条件である．


      \section{最適なバーリリース条件に基づくリリース実験}
          
        \secref{J}に基づいて最適なバーリリース条件を求め，
        実機を用いて，リリース実験を行った．
        

